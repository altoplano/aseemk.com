<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0" />

    {% capture pageTitleEsc %}{{ page.title | escape }}{% endcapture %}
    {% capture pageSectionEsc %}{{ page.section | escape }}{% endcapture %}
    {% capture siteTitleEsc %}{{ site.title | escape }}{% endcapture %}

    <title>{% if page.title %}{{ pageTitleEsc }}
        - {% endif %}{% if page.section %}{{ pageSectionEsc }}
        - {% endif %}{{ siteTitleEsc }}</title>

    <meta name="description" content="{{ page.description | escape }}" />

    <!-- http://developers.facebook.com/docs/opengraph/ -->
    <!-- TODO is there a better liquid way of "if x then x else y"?
         "x or y" doesn't seem to work, neither "or" nor "||". -->
    {% capture ogTitle %}{% if page.title %}{{ pageTitleEsc }}{% elsif page.section %}{{ pageSectionEsc }}{% else %}{{ siteTitleEsc }}{% endif %}{% endcapture %}
    {% capture ogSiteName %}{% if page.title && page.section %}{{ pageSectionEsc }}
        - {% endif %}{{ siteTitleEsc }}{% endcapture %}
    <meta property="og:title" content="{{ ogTitle }}" />
    <meta property="og:site_name" content="{{ ogSiteName }}" />
    <meta property="og:type" content="{% if page.og_type %}{{ page.og_type | escape }}{% else %}website{% endif %}" />
    <meta property="og:image" content="{{ page.og_image | escape }}" />

    <meta property="fb:admins" content="704844" />
    <meta property="fb:app_id" content="160410744017439" />

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" href="/styles/h5bp-base.css" />
    <link rel="stylesheet" href="/styles/common.css" />

    <!-- this is needed before body to enable HTML5 elements in IE8- -->
    <script src="/scripts/modernizr-1.7.min.js"></script>

    <!-- convenience variables/etc. for scripts -->
    <!-- TODO remove this once no longer needed -->
    <script>
        var BASE_URL = '{{ site.url }}';    // TODO JS-escape this somehow?
    </script>
